getOption("consensus.name")
citation("consensus")
install.packages("roxygen2")
library(roxygen2)
library(devtools)
document()
library(consensus)
?plurality
library(consensus)
load_all()
?ggplot
library(ggplot2)
?ggplot2
file.path(R.home("doc"), "KEYWORDS")
install.packages("devtools")
devtools::use_testthat()
source('~/.active-rstudio-document')
calculate_distances(iris)
calculate_distances(iris, "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris, "manhattan")
iris
calculate_distances(iris[-5], "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "manhattan")
source('~/Desktop/Github/consensus/consensus/R/as_ranking.R')
source('~/.active-rstudio-document')
calculate_distances(iris)
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
developer = TRUE
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
calculate_distances(iris[-5], c("euclidean", "manhattan")
)
=======
source('~/.active-rstudio-document')
library(consensus)
borda_count <- function(profileOfRankings, verbose = FALSE) {
if(verbose) {
print('Executing Borda...')
}
attname <- deparse(substitute(profileOfRankings))
# Split votes and rankings
splittedPOF <- split_profile_of_rankings(profileOfRankings)
# Get votes
votes <- splittedPOF$votes
# Get rankings
profileOfRankings <- splittedPOF$rankings
# Get the candidates
candidates <- splittedPOF$candidates
# Result vectors
v <- vector(length = ncol(profileOfRankings))
names(v) <- names(profileOfRankings)
# For each ranking in the profile of rankings
for(i in 1:nrow(profileOfRankings)) {
numVotersRow <- votes[i]
ranking <- profileOfRankings[i,]
p <- calculatePoints(ranking)
v <- v + (numVotersRow * p)
if(verbose) {
cat("-> The points for this ranking\n")
print(p)
cat("-> This ranking has ",numVotersRow," voters\n")
cat("-> The current value of the total points is:")
print(v)
}
# para candidato
# contar el número de candidatos que hay por debajo de él
# multiplicarlo por el número de votos de ese ranking
#for(c in 1:length(ranking)) {
#print(ranking)
#pos_of_c_in_the_ranking <- as.numeric(ranking[c])
#print(pos_of_c_in_the_ranking)
#lower_pos <- ranking > pos_of_c_in_the_ranking
#print(lower_pos)
#total_worse_pos <- sum(lower_pos)
#borda <- numVotersRow * total_worse_pos
#print(borda)
#v[c] <- v[c] + borda
#print('v')
#print(v)
#}
#ranking <- as.numeric(ranking)
# rpoints <- sort(unique(ranking), decreasing = TRUE)
# # - 1 for taking into account only the positions after the element and
# # not the position of the element itself
# rpoints <- as.numeric(rpoints - 1)
#
# # For each candidate in the ranking
# for(index in ranking) { # index = current candidate: a, b, c...
#   # position of the candidate "index" in the ranking
#   r <- as.numeric(ranking[index])
#   borda <- numVotersRow * rpoints[r]
#   v[index] <- v[index] + borda
# }
}
v <- sort(v, decreasing = TRUE) # sort v from more votes to less
if(verbose) {
print(paste('Points rewarded by each candidate of the profile of rankings', "'", attname, "'"))
print(v)
print('Ranking:')
}
gr <- names(v)[1] # graphic ranking
# vector that will store the final ranking
ranking <- rep(0, length(candidates))
names(ranking) <- candidates
pos <- 1 # position in the ranking
for(i in 1:(length(v)-1)) {
# gr
thisElem <- v[i]
nextElem <- v[i+1]
#print(paste('comparing', thisElem, 'with', nextElem, 'with pos', pos))
# ranking
index_of_candidate <- which(candidates == names(v)[i])
ranking[index_of_candidate] <- pos
if(thisElem > nextElem) {
gr <- paste(gr, '>',names(v)[i+1])
pos <- pos + 1
}
else { # this means the two rankings are equals
gr <- paste(gr, '~',names(v)[i+1])
}
}
ranking[which(candidates == names(v)[i+1])] <- pos
if(verbose == TRUE) {
print(gr)
}
return(ranking)
}
calculatePoints <- function(ranking, verbose = F) {
# number of different positions in the rankings
n_of_candidates <- length(ranking)
max_pos <- max(ranking)
if(n_of_candidates == max_pos) {
# the same result would be achieve with the following code
# but here the operation is vectorized so execution time decreases
if(verbose)
cat("No ties for this ranking\n")
return(n_of_candidates - ranking)
}
# vector that will store the puntuation for each category
points_by_pos <- rep(-1, max_pos)
# for each category...
for(i in 1:max_pos) {
max_interval <- n_of_candidates - 1 - sum(ranking < i)
min_interval <- max_interval - (sum(ranking == i) - 1)
points_by_pos[i] <- (max_interval+min_interval)/2
}
points_for_each_candidate <- ranking
points_for_each_candidate <- sapply(ranking, function(x) {points_by_pos[x]})
if(verbose) {
cat("The points for the ranking...\n")
print(ranking)
cat("...are:\n")
print(points_for_each_candidate)
}
return(points_for_each_candidate)
}
source('~/.active-rstudio-document')
>>>>>>> master
library(consensus)
library(consensus)
install.packages("usethis")
library(usethis)
use_test("ranking")
library(consensus)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
library(consensus)
library(consensus)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
??str_replace_all
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
library(stringr)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
print(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
source('~/Desktop/Github/consensus/consensus/R/parse_ranking.R')
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
the_ranking
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
numeric.print(the_ranking)
print.numeric(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
print.numeric(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
print.default(the_ranking)
source('~/Desktop/Github/consensus/consensus/R/as_ranking.R')
rm(list = ls())
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
library(consensus)
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages("rstudioapi")
rstudioapi::isAvailable("0.99.149")
devtools::install_github("r-lib/devtools")
library(devtools)
has_devel()
??has_devel
devtools::install_github("r-lib/devtools")
install.packages("devtools")
library(devtools)
library(devtools)
has_devel()
devtools::install_github("hadley/devtools")
install.packages("devtools")
library(devtools)
.rs.restartR()
library(devtools)
has_devel()
has_devel()
logical <- has_devel()
logical
rm(logical)
load_all()
check()
check()
check()
use_mit_license("Noelia Rico")
document()
document()
load_all()
?profile_of_rankings
check()
check()
install()
use_testthat()
test()
P = 1:10/sum(1:10)
P
rm(P)
Q = 20:29/sum(20:29)
Q
rm(Q)
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
install.packages("philentropy")
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
library(philentropy)
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
?dist
use_readme_rmd()
install()
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R')
check()
scoring(table2.1, "plurality")
data(table2.1)
install()
data(table2.1)
library(consensus)
data(table2.1)
library(consensus)
source('~/Desktop/Github/consensus/consensus/R/parse_ranking.R')
source('~/Desktop/Github/consensus/consensus/R/read_rankings.R')
library(consensus)
rm(list = ls())
?trainControl
library(caret)
?trainControl
library(consensus)
library(consensus)
library(consensus)
document()
library(devtools)
document()
document()
library(consensus)
library(consensus)
source('~/Desktop/Github/consensus/consensus/R/ranking.R', echo=TRUE)
library(consensus)
library(consensus)
library(consensus)
library(consensus)
1:3
library(consensus)
library(devtools)
document()
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R', echo=TRUE)
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R', echo=TRUE)
rm(list=ls())
library(consensus)
ranking(c(1,4,3,2,1,3,2,1,2))
plurality(ranking(c(1,4,3,2,1,3,2,1,2)))
profile_of_rankings(ranking(c(1,4,3,2,1,3,2,1,2)))
?profile_of_rankings
matrix(ranking(c(1,4,3,2,1,3,2,1,2)))
matrix(ranking(c(1,4,3,2,1,3,2,1,2)), nrow = T)
profile_of_rankings(matrix(ranking(c(1,4,3,2,1,3,2,1,2)), nrow = T))
profile_of_rankings(c(1,4,3,2,1,3,2,1,2), nrow = T))
profile_of_rankings(matrix = c(1,4,3,2,1,3,2,1,2), nrow = T))
profile_of_rankings(matrix(c(1,4,3,2,1,3,2,1,2), nrow = T))
profile_of_rankings(matrix(c(1,4,3,2,1,3,2,1,2), nrow = T), candidates = letters[1:9])
matrix(c(1,4,3,2,1,3,2,1,2), nrow = T)
plurality(matrix(c(1,4,3,2,1,3,2,1,2), nrow = T))
profile_of_rankings()
plurality(matrix(c(1,4,3,2,1,3,2,1,2), nrow = T, colnames = letters[1:9]))
?matrix
m <- matrix(c(1,4,3,2,1,3,2,1,2), nrow = T)
colnames(m) <- letters[1:9]
m
profile_of_rankings(m)
plurality(profile_of_rankings(m))
plurality(profile_of_rankings(m), TRUE)
?plurality
plurality(profile_of_rankings(m), verbose = TRUE)
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R', echo=TRUE)
rm(list=ls())
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
m <- matrix(c(1,4,3,2,1,3,2,1,2), nrow = T)
colnames(m) <- letters[1:9]
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
two(profile_of_rankings(m), verbose = TRUE)
three(profile_of_rankings(m), verbose = TRUE)
library(consensus)
library(devtools)
document()
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
document()
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
library(consensus)
plurality(profile_of_rankings(m), verbose = TRUE)
plurality(profile_of_rankings(m), verbose = FALSE)
r1 <- c(3, 5, 1, 4, 2, 1, 3, 1, 2, 4, 5)
names(r1) <- LETTERS[1:11]
r1
library(consensus)
ranking(r1)
two(r1)
profile_of_rankings(matrix(r1))
matrix(r1)
matrix(r1, byrow = TRUE)
matrix(r1, nrow = 1, byrow = TRUE)
r1 <- c(3, 5, 1, 4, 2, 1, 3, 1, 2, 4, 5)
r1 <- matrix(r1, nrow = 1, byrow = TRUE)
names(r1) <- LETTERS[1:11]
r1
r1 <- c(3, 5, 1, 4, 2, 1, 3, 1, 2, 4, 5)
r1 <- matrix(r1, nrow = 1, byrow = TRUE)
colnames(r1) <- LETTERS[1:11]
r1
two(r1)
r1 <- c(3, 5, 1, 4, 2, 1, 3, 1, 2, 4, 5)
r1 <- matrix(r1, nrow = 1, byrow = TRUE)
colnames(r1) <- LETTERS[1:11]
r1 <- profile_of_rankings(r1)
r1
two(r1)
two(r1, verbose = TRUE)
ones <- 2
random_por <- function(elements, size, names = TRUE) {
dif <- size - elements
stopifnot(dif >= 0)
r <- c(sample(1:elements, elements), sample(1:elements, dif, replace = TRUE))
r <- matrix(r, nrow = 1, byrow = TRUE)
colnames(r) <- LETTERS[1:size]
return(r)
}
random_por()
random_por(5, 7)
rm(random_por)
set.seed(123)
r1 <- random_ranking(7, 10)
random_ranking <- function(elements, size, names = TRUE) {
dif <- size - elements
stopifnot(dif >= 0)
r <- c(sample(1:elements, elements), sample(1:elements, dif, replace = TRUE))
r <- matrix(r, nrow = 1, byrow = TRUE)
colnames(r) <- LETTERS[1:size]
return(r)
}
set.seed(123)
r1 <- random_ranking(7, 10)
r2 <- random_ranking(7, 10)
r3 <- random_ranking(7, 10)
r1
r2
r3
random_ranking <- function(elements, size, names = TRUE) {
dif <- size - elements
stopifnot(dif >= 0)
r <- c(sample(1:elements, elements), sample(1:elements, dif, replace = TRUE))
r <- matrix(r, nrow = 1, byrow = TRUE)
colnames(r) <- LETTERS[1:size]
r <- profile_of_rankings(r)
return(r)
}
set.seed(123)
r1 <- random_ranking(7, 10)
r2 <- random_ranking(7, 10)
r3 <- random_ranking(7, 10)
r1
two(r1, verbose = TRUE)
r1
two(r1, verbose = TRUE)
three(r1, verbose = TRUE)
five(r1, verbose = TRUE)
seven(r1, verbose = TRUE)
two(r1, verbose = TRUE)
two(r1, verbose = TRUE)
three(r1, verbose = TRUE)
five(r1, verbose = TRUE)
seven(r1, verbose = TRUE)
two(r1, verbose = TRUE)
ones <- 2
r <- r1
r1
r2
r3
for(i in 1:ones) {
print(i)
if(sum((r < i) >= ones) {
print(i)
}
}
r <- r1
for(i in 1:ones) {
if(sum((r < i) >= ones)) {
print(i)
}
}
r1
r1 < 1
r <- r1
for(i in 1:ones) {
if(sum((r <= i) >= ones)) {
print(i)
}
}
r1 < 1
r1 <= 1
r1[,1]
r1
set.seed(123)
r1[,-1] <- random_ranking(7, 10)
r1
r1 <- random_ranking(7, 10)
r1
r1
r1[,-1]
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R')
random_ranking <- function(elements, size, names = TRUE) {
dif <- size - elements
stopifnot(dif >= 0)
r <- c(sample(1:elements, elements), sample(1:elements, dif, replace = TRUE))
r <- matrix(r, nrow = 1, byrow = TRUE)
colnames(r) <- LETTERS[1:size]
r <- profile_of_rankings(r)
return(r)
}
set.seed(123)
r1 <- random_ranking(7, 10)
r1
two(r1)
library(consensus)
two(r1)
remove.packages("consensus")
library(consensus)
plurality(r1)
