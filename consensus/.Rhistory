profileOfRankings <- profile_of_rankings(
c('a','b','c','d',
'a','d','b','c',
'd','a','c','b'),
candidates = c('a','b','c','d'))
profileOfRankings <- profile_of_rankings(
m,
candidates = c('a','b','c','d'))
m <- matrix(c('a','b','c','d',
'a','d','b','c',
'd','a','c','b'), ncol = 4, byrow = T)
m
profileOfRankings <- profile_of_rankings(
m,
candidates = c('a','b','c','d'))
profileOfRankings
m
profileOfRankings <- profile_of_rankings(
m)
m
profile_of_rankings(m)
args <- c("matrix", "numberOfVoters", "candidates", "ties")
args
combn(args)
combn(args, 4)
combn(args, 16)
combn(args, 4)
combn(args, 1)
combn(args, 2)
expand.grid(factor(args))
expand.grid(rep(factor(args), 4))
expand.grid(args, args, args, args)
expand.grid(args)
expand.grid(args, args)
install.packages("QCA")
library(QCA)
truthTable(args)
data(d.Kro)
head(d.Kro)
truthTable(d.Kro)
truthTable(d.Kro, outcome = "WNP")
do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list)))
v1 <- args
do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list)))
unlist(do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list))))
data.frame(do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list))))
as.data.frame(do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list))))
do.call("c", lapply(seq_along(v1), function(i) combn(v1, i, FUN = list)))
profile_of_rankings(m)
profile_of_rankings(m, candidates = c('a','b','c','d'))
m <- matrix(c(1,3,2,4,1,3,2,2,1,4,3,2), nrow = 3, byrow = T)
m
profile_of_rankings(m, candidates = c('a','b','c','d'))
class(profile_of_rankings(m, candidates = c('a','b','c','d')))
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
load("R/data/table2.1.rda")
ls
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
apply(table2.1, 1, print.ranking)
apply(table2.1, 1, print)
table2.1
load("R/data/table2.1.rda")
table2.1
apply(table2.1, 1, print)
apply(table2.1, 1, print.ranking)
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
apply(table2.1, 1, print.ranking)
table2.1
class(table2.1) <- por
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
load("R/data/table2.1.rda")
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
load("R/data/table2.1.rda")
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
load("R/data/table2.1.rda")
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
load("R/data/table2.1.rda")
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
class(table2.1) <- "por"
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
print.data.frame(table2.1)
load("R/data/table2.1.rda")
table2.1
split_profile_of_rankings(table2.1)
class(table2.1) <- "por"
split_profile_of_rankings(table2.1)
class(table2.1) <- c("por", "data.frame")
table2.1
split_profile_of_rankings(table2.1)
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
load("R/data/table2.1.rda")
class(table2.1) <- c("por", "data.frame")
table2.1
rm(print.por)
load("R/data/table2.1.rda")
class(table2.1) <- c("por", "data.frame")
split_profile_of_rankings(table2.1)
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
library(consensus)
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
library(consensus)
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/ranking.R')
library(consensus)
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
library(consensus)
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
library(consensus)
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
source('~/Desktop/Tesis/consensus/consensus/consensus/R/profile_of_rankings.R')
table2.1
library(consensus)
table2.1
class(table2.1) <- "por"
table2.1
load("R/data/table2.1.rda")
class(table2.1) <- c("por", "data.frame")
table2.1
library(consensus)
table2.1
library(consensus)
install.packages("devtools")
library(devtools)
.onLoad() <- function(libname, pkgname) {
packageStartupMessage("Welcome to consensus!")
}
library(consensus)
?.onAttach
library(consensus)
library(consensus)
library(consensus)
library(consensus)
library(consensus)
library(consensus)
?invisible
library(consensus)
getOption("op.consensus")
library(consensus)
getOption("consensus.name")
?suppressPackageStartupMessages
suppressPackageStartupMessages(F)
library(consensus)
library(consensus)
getOption("consensus.name")
citation("consensus")
install.packages("roxygen2")
library(roxygen2)
library(devtools)
document()
library(consensus)
?plurality
library(consensus)
load_all()
?ggplot
library(ggplot2)
?ggplot2
file.path(R.home("doc"), "KEYWORDS")
install.packages("devtools")
devtools::use_testthat()
source('~/.active-rstudio-document')
calculate_distances(iris)
calculate_distances(iris, "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris, "manhattan")
iris
calculate_distances(iris[-5], "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "manhattan")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "manhattan")
source('~/Desktop/Github/consensus/consensus/R/as_ranking.R')
source('~/.active-rstudio-document')
calculate_distances(iris)
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
developer = TRUE
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
source('~/.active-rstudio-document')
calculate_distances(iris[-5], "euclidean")
calculate_distances(iris[-5], c("euclidean", "manhattan")
)
=======
source('~/.active-rstudio-document')
library(consensus)
borda_count <- function(profileOfRankings, verbose = FALSE) {
if(verbose) {
print('Executing Borda...')
}
attname <- deparse(substitute(profileOfRankings))
# Split votes and rankings
splittedPOF <- split_profile_of_rankings(profileOfRankings)
# Get votes
votes <- splittedPOF$votes
# Get rankings
profileOfRankings <- splittedPOF$rankings
# Get the candidates
candidates <- splittedPOF$candidates
# Result vectors
v <- vector(length = ncol(profileOfRankings))
names(v) <- names(profileOfRankings)
# For each ranking in the profile of rankings
for(i in 1:nrow(profileOfRankings)) {
numVotersRow <- votes[i]
ranking <- profileOfRankings[i,]
p <- calculatePoints(ranking)
v <- v + (numVotersRow * p)
if(verbose) {
cat("-> The points for this ranking\n")
print(p)
cat("-> This ranking has ",numVotersRow," voters\n")
cat("-> The current value of the total points is:")
print(v)
}
# para candidato
# contar el número de candidatos que hay por debajo de él
# multiplicarlo por el número de votos de ese ranking
#for(c in 1:length(ranking)) {
#print(ranking)
#pos_of_c_in_the_ranking <- as.numeric(ranking[c])
#print(pos_of_c_in_the_ranking)
#lower_pos <- ranking > pos_of_c_in_the_ranking
#print(lower_pos)
#total_worse_pos <- sum(lower_pos)
#borda <- numVotersRow * total_worse_pos
#print(borda)
#v[c] <- v[c] + borda
#print('v')
#print(v)
#}
#ranking <- as.numeric(ranking)
# rpoints <- sort(unique(ranking), decreasing = TRUE)
# # - 1 for taking into account only the positions after the element and
# # not the position of the element itself
# rpoints <- as.numeric(rpoints - 1)
#
# # For each candidate in the ranking
# for(index in ranking) { # index = current candidate: a, b, c...
#   # position of the candidate "index" in the ranking
#   r <- as.numeric(ranking[index])
#   borda <- numVotersRow * rpoints[r]
#   v[index] <- v[index] + borda
# }
}
v <- sort(v, decreasing = TRUE) # sort v from more votes to less
if(verbose) {
print(paste('Points rewarded by each candidate of the profile of rankings', "'", attname, "'"))
print(v)
print('Ranking:')
}
gr <- names(v)[1] # graphic ranking
# vector that will store the final ranking
ranking <- rep(0, length(candidates))
names(ranking) <- candidates
pos <- 1 # position in the ranking
for(i in 1:(length(v)-1)) {
# gr
thisElem <- v[i]
nextElem <- v[i+1]
#print(paste('comparing', thisElem, 'with', nextElem, 'with pos', pos))
# ranking
index_of_candidate <- which(candidates == names(v)[i])
ranking[index_of_candidate] <- pos
if(thisElem > nextElem) {
gr <- paste(gr, '>',names(v)[i+1])
pos <- pos + 1
}
else { # this means the two rankings are equals
gr <- paste(gr, '~',names(v)[i+1])
}
}
ranking[which(candidates == names(v)[i+1])] <- pos
if(verbose == TRUE) {
print(gr)
}
return(ranking)
}
calculatePoints <- function(ranking, verbose = F) {
# number of different positions in the rankings
n_of_candidates <- length(ranking)
max_pos <- max(ranking)
if(n_of_candidates == max_pos) {
# the same result would be achieve with the following code
# but here the operation is vectorized so execution time decreases
if(verbose)
cat("No ties for this ranking\n")
return(n_of_candidates - ranking)
}
# vector that will store the puntuation for each category
points_by_pos <- rep(-1, max_pos)
# for each category...
for(i in 1:max_pos) {
max_interval <- n_of_candidates - 1 - sum(ranking < i)
min_interval <- max_interval - (sum(ranking == i) - 1)
points_by_pos[i] <- (max_interval+min_interval)/2
}
points_for_each_candidate <- ranking
points_for_each_candidate <- sapply(ranking, function(x) {points_by_pos[x]})
if(verbose) {
cat("The points for the ranking...\n")
print(ranking)
cat("...are:\n")
print(points_for_each_candidate)
}
return(points_for_each_candidate)
}
source('~/.active-rstudio-document')
>>>>>>> master
library(consensus)
library(consensus)
install.packages("usethis")
library(usethis)
use_test("ranking")
library(consensus)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
library(consensus)
library(consensus)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
??str_replace_all
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
library(stringr)
the_ranking <- "a > b ~ c > d > e"
parse_ranking(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
print(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
source('~/Desktop/Github/consensus/consensus/R/parse_ranking.R')
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
the_ranking
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
numeric.print(the_ranking)
print.numeric(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
print.numeric(the_ranking)
the_ranking <- "a > b ~ c > d > e"
the_ranking <- parse_ranking(the_ranking)
class(the_ranking)
print.default(the_ranking)
source('~/Desktop/Github/consensus/consensus/R/as_ranking.R')
rm(list = ls())
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
library(consensus)
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
library(consensus)
read_rankings("R/data/profile_of_rankings_1.txt")
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages("rstudioapi")
rstudioapi::isAvailable("0.99.149")
devtools::install_github("r-lib/devtools")
library(devtools)
has_devel()
??has_devel
devtools::install_github("r-lib/devtools")
install.packages("devtools")
library(devtools)
library(devtools)
has_devel()
devtools::install_github("hadley/devtools")
install.packages("devtools")
library(devtools)
.rs.restartR()
library(devtools)
has_devel()
has_devel()
logical <- has_devel()
logical
rm(logical)
load_all()
check()
check()
check()
use_mit_license("Noelia Rico")
document()
document()
load_all()
?profile_of_rankings
check()
check()
install()
use_testthat()
test()
P = 1:10/sum(1:10)
P
rm(P)
Q = 20:29/sum(20:29)
Q
rm(Q)
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
install.packages("philentropy")
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
library(philentropy)
jaccard(P = 1:10/sum(1:10), Q = 20:29/sum(20:29), testNA = FALSE)
?dist
use_readme_rmd()
install()
source('~/Desktop/Github/consensus/consensus/R/scoring_ranking_rule.R')
check()
scoring(table2.1, "plurality")
data(table2.1)
install()
data(table2.1)
library(consensus)
data(table2.1)
library(consensus)
source('~/Desktop/Github/consensus/consensus/R/parse_ranking.R')
source('~/Desktop/Github/consensus/consensus/R/read_rankings.R')
library(consensus)
rm(list = ls())
?trainControl
library(caret)
?trainControl
library(consensus)
library(consensus)
library(consensus)
document()
library(devtools)
document()
document()
library(consensus)
library(consensus)
source('~/Desktop/Github/consensus/consensus/R/ranking.R', echo=TRUE)
library(consensus)
library(consensus)
library(consensus)
library(consensus)
1:3
library(consensus)
library(devtools)
document()
